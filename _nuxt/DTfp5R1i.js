import{_ as ve}from"./4KJD6TD-.js";import{_ as re}from"./BXxHOZkN.js";import{_ as fe}from"./B__ysSUc.js";import{r as c,d as oe,L as z,w as A,D as se,I as K,l as n,a,b as U,s as ge,x as be,N as J,q as o,A as H,v as D,o as N,y as M,R as ye,B as Ve,C as _e,E as he,c as ne,K as we,J as W,S as ke,z as Me,G as Pe}from"./BSGE5GTI.js";import{u as ue}from"./CkL3z1VM.js";import{u as S}from"./BLyE8agl.js";import{c as ae}from"./DzMSTMj6.js";import{V as ie}from"./D77b0ex7.js";import{V as qe}from"./DF6IzxTq.js";import{V as Ce}from"./CGIYWge0.js";import{V as Be,a as x}from"./BA1Q-Lks.js";import{V as Se}from"./DGJLOgtI.js";import{_ as xe}from"./Dy-GdebM.js";import{_ as $e}from"./C8Wvh8wb.js";import{V as Ae}from"./CLLojKmd.js";import{V as te}from"./CnJXHhAe.js";import{V as Ue}from"./BkqMEpij.js";import{V as De}from"./DwApywtV.js";import{V as Ne,a as le}from"./CsSRgOlO.js";import{V as Re}from"./J9FyYICg.js";import{V as Ee}from"./DIFYFz4Q.js";import{V as Te}from"./CNo6l2ZD.js";import"./Z4zssqwt.js";import"./BFpEfhYG.js";import"./VtgzhqRg.js";import"./D1b0O_WH.js";import"./DVOIMO_o.js";import"./B_ahJWon.js";import"./DiwIzWSr.js";/* empty css        */import"./TnX_cM-C.js";import"./CL7y6R7f.js";import"./vbOnNZeH.js";import"./276_PEDG.js";const de=()=>{const P=c([]),_=c(!1);return{members:P,loadingMembers:_,fetchMembers:async u=>{_.value=!0;try{const{data:l,response:b,error:y}=await S(ae("/members",u)).json();return P.value=l.value.data||[],{data:l.value,response:b,error:y}}catch(l){return console.error("Error fetching coach:",l),{data:null,response:null,error:l}}finally{_.value=!1}},fetchMembersOption:async u=>{_.value=!0;try{const{data:l,response:b,error:y}=await S(ae("/options/members",u)).json();return P.value=l.value||[],{data:l.value,response:b,error:y}}catch(l){return console.error("Error fetching coach:",l),{data:null,response:null,error:l}}finally{_.value=!1}},deleteMember:async u=>await S(`/members/${u}`,{method:"DELETE"}),reactivateMember:async u=>await S(`/members/${u}/reactivate`,{method:"PUT"}),storeMember:async u=>await S("/members").post(u).json(),updateMember:async(u,l)=>await S(`/members/${u}`).put(l).json()}},Fe={class:"text-h4 text-center mb-2"},Ie=oe({__name:"AddEditMemberDialog",props:{resource:{default:()=>({id:"",name:"",gender:null,email:"",phone:"",kecamatan_id:null,kecamatan_name:""})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","submit"],setup(P,{emit:_}){var w;const{showSnackbar:d}=ye(),h=P,v=_,m=c(structuredClone(z(h.resource)));A(()=>h.resource,s=>{m.value=structuredClone(z(s))},{deep:!0});const f=c({name:void 0,email:void 0,gender:void 0,phone:void 0}),g=c(!1),u=()=>{v("update:isDialogVisible",!1),m.value=structuredClone(z(h.resource))},l=async()=>{try{if(m.value.id){const s=await R();s!=null&&s.id&&(v("update:isDialogVisible",!1),v("submit",s))}else{const s=await G();s!=null&&s.id&&(v("update:isDialogVisible",!1),v("submit",s))}}catch(s){console.error("Failed to submit form:",s)}},b=ue(),{status:y,genders:B}=se(b),T=c(""),q=c([]),{fetchWilayah:F}=b,X=async()=>{F(T.value).then(({data:s})=>{console.log("ss",s.value.data),q.value=s.value.data})},I=c(((w=h.resource)==null?void 0:w.kecamatan_id)??null),{storeMember:Q,updateMember:j}=de(),G=async()=>{var s;try{f.value={},g.value=!0,delete m.value.id;const{data:i,error:V,response:k}=await Q(m.value);if(V.value){f.value=((s=V.value.data)==null?void 0:s.errors)??{},d(V.value.message,"error"),g.value=!1;return}return g.value=!1,i.value}catch(i){console.error("Failed to delete class:",i)}finally{g.value=!1}},R=async()=>{var s;try{f.value={},g.value=!0;const{data:i,error:V,response:k}=await j(m.value.id,m.value);if(V.value){f.value=((s=V.value.data)==null?void 0:s.errors)??{},d(V.value.message,"error"),g.value=!1;return}return g.value=!1,i.value}catch(i){console.error("Failed to delete class:",i)}finally{g.value=!1}};return(s,i)=>{const V=ve,k=re,L=fe;return N(),K(Se,{width:s.$vuetify.display.smAndDown?"auto":900,"model-value":h.isDialogVisible,"onUpdate:modelValue":i[7]||(i[7]=p=>s.$emit("update:isDialogVisible",p))},{default:n(()=>[a(V,{onClick:i[0]||(i[0]=p=>s.$emit("update:isDialogVisible",!1))}),a(ie,{class:"pa-2 pa-sm-10"},{default:n(()=>[a(qe,null,{default:n(()=>[U("h4",Fe,ge(h.resource.id?"Edit":"Add New")+" Member ",1),a(Ce,{onSubmit:be(l,["prevent"])},{default:n(()=>[a(Be,null,{default:n(()=>[a(x,{cols:"12"},{default:n(()=>[a(k,{modelValue:o(m).name,"onUpdate:modelValue":i[1]||(i[1]=p=>o(m).name=p),label:"Name",placeholder:"Full Name","error-messages":o(f).name},null,8,["modelValue","error-messages"])]),_:1}),a(x,{cols:"12"},{default:n(()=>[a(L,{modelValue:o(m).gender,"onUpdate:modelValue":i[2]||(i[2]=p=>o(m).gender=p),label:"Select Gender",placeholder:"Select Gender",items:o(B),clearable:!0,"error-messages":o(f).gender},null,8,["modelValue","items","error-messages"])]),_:1}),a(x,{cols:"12"},{default:n(()=>[a(k,{modelValue:o(m).email,"onUpdate:modelValue":i[3]||(i[3]=p=>o(m).email=p),label:"E-Mail",placeholder:"user@gmail.com","error-messages":o(f).email},null,8,["modelValue","error-messages"])]),_:1}),a(x,{cols:"12"},{default:n(()=>[a(k,{modelValue:o(m).phone,"onUpdate:modelValue":i[4]||(i[4]=p=>o(m).phone=p),label:"Phone",placeholder:"089999999","error-messages":o(f).phone},null,8,["modelValue","error-messages"])]),_:1}),a(x,{cols:"12"},{default:n(()=>[a(k,{label:"Password (default)",placeholder:"password",disabled:""})]),_:1}),J("",!0),a(x,{cols:"12",class:"text-center"},{default:n(()=>[a(H,{type:"submit",class:"me-3",loading:o(g)},{default:n(()=>i[8]||(i[8]=[D(" Submit ")])),_:1},8,["loading"]),a(H,{variant:"tonal",color:"secondary",onClick:u},{default:n(()=>i[9]||(i[9]=[D(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),Qe={class:"d-flex flex-wrap gap-4 my-4 mx-6"},je={class:"d-flex gap-4 flex-wrap align-center"},Ge={class:"d-flex flex-wrap gap-4 ma-6"},Le=oe({__name:"Member",setup(P){const _=ue(),d=Ve(),h=Pe(),v=c(d.query.status||void 0),m=c(d.query.q||""),f=c(m.value),g=c([]),u=c(Number(d.query.itemsPerPage)||15),l=c(Number(d.query.page)||1),b=c(d.query.sortBy||void 0),y=c(d.query.orderBy||void 0),B=c({currentPage:l.value,lastPage:1,total:0,perPage:u.value}),T=()=>{console.log("updateQueryParams");const t={...d.query,q:m.value||void 0,status:v.value||void 0,page:l.value!==1?String(l.value):void 0,itemsPerPage:u.value!==15?String(u.value):void 0,sortBy:b.value||void 0,orderBy:y.value||void 0};Object.keys(t).forEach(e=>{t[e]===void 0&&delete t[e]}),h.replace({query:t})};A([m,v,u,l,b,y],()=>{T()}),A(()=>d.query,()=>{(d.query.q!==m.value||d.query.status!==v.value||Number(d.query.page||1)!==l.value||Number(d.query.itemsPerPage||15)!==u.value||d.query.sortBy!==b.value||d.query.orderBy!==y.value)&&(m.value=d.query.q||"",v.value=d.query.status||void 0,l.value=Number(d.query.page)||1,u.value=Number(d.query.itemsPerPage)||15,b.value=d.query.sortBy||void 0,y.value=d.query.orderBy||void 0),w()},{deep:!0});let q=null;A(f,t=>{q&&clearTimeout(q),q=setTimeout(()=>{m.value=t,l.value!==1&&(l.value=1)},500)}),_e(()=>{q&&clearTimeout(q)});const{status:F}=se(_),X=t=>{var e,C;l.value=t.page,u.value=t.itemsPerPage,t.sortBy&&t.sortBy.length>0?(b.value=(e=t.sortBy[0])==null?void 0:e.key,y.value=(C=t.sortBy[0])==null?void 0:C.order):(b.value=void 0,y.value=void 0)},I=c(null),{fetchMembers:Q,deleteMember:j,reactivateMember:G}=de(),R=c([]),w=async()=>{const t={q:m.value,status:v.value,page:l.value,per_page:u.value,sort_by:b.value,order_by:y.value},{data:e,response:C,error:O}=await Q({query:t});return R.value=e.data,I.value=e,{data:e,response:C,error:O}};A(I,t=>{t&&(B.value={currentPage:t.current_page,lastPage:t.last_page,total:t.total,perPage:t.per_page},l.value=t.current_page,u.value=t.per_page)},{deep:!0});const s=[{title:"Name",key:"name",sortable:!0,align:"start"},{title:"E-Mail",key:"email",sortable:!0,align:"start"},{title:"Phone",key:"phone",sortable:!0,align:"start"},{title:"Gender",key:"gender",sortable:!0,align:"center"},{title:"Status",key:"status",sortable:!1,align:"end",width:100},{title:"Actions",key:"actions",sortable:!1,align:"end",width:100}],i=t=>{if(t==="active")return{text:"Active",color:"success"};if(t==="inactive")return{text:"Inactive",color:"error"}},V=t=>{if(t==="M")return{color:"primary",icon:"tabler-mars"};if(t==="F")return{color:"error",icon:"tabler-venus"}},k=async t=>{try{await j(t),w()}catch(e){console.error("Failed to delete class:",e)}},L=async t=>{try{await G(t),w()}catch(e){console.error("Failed to delete class:",e)}};he(async()=>{await w()});const p=c(!1),E=c(!1),Y=c(null),me=t=>{Y.value=t,E.value=!0};return(t,e)=>{const C=Ie,O=re,ce=xe,Z=we("IconBtn"),pe=$e;return N(),ne("div",null,[a(ie,null,{default:n(()=>[U("div",Qe,[e[12]||(e[12]=U("div",{class:"font-weight-medium text-lg align-self-center"},"Member",-1)),a(Ae),U("div",je,[a(H,{color:"primary","prepend-icon":"tabler-plus",onClick:e[0]||(e[0]=()=>{p.value=!0})},{default:n(()=>e[11]||(e[11]=[D(" Add Member ")])),_:1}),a(C,{"is-dialog-visible":o(p),"onUpdate:isDialogVisible":e[1]||(e[1]=r=>M(p)?p.value=r:null),onSubmit:e[2]||(e[2]=r=>w())},null,8,["is-dialog-visible"]),a(C,{"is-dialog-visible":o(E),"onUpdate:isDialogVisible":e[3]||(e[3]=r=>M(E)?E.value=r:null),resource:o(Y),onSubmit:e[4]||(e[4]=r=>w())},null,8,["is-dialog-visible","resource"])])]),a(te),U("div",Ge,[a(O,{modelValue:o(f),"onUpdate:modelValue":e[5]||(e[5]=r=>M(f)?f.value=r:null),placeholder:"Search",clearable:"",style:{"min-width":"200px"}},null,8,["modelValue"]),a(ce,{modelValue:o(v),"onUpdate:modelValue":e[6]||(e[6]=r=>M(v)?v.value=r:null),placeholder:"Status",items:o(F),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),a(te,{class:"mt-4"}),a(Ue,{"items-per-page":o(u),"onUpdate:itemsPerPage":e[8]||(e[8]=r=>M(u)?u.value=r:null),"model-value":o(g),"onUpdate:modelValue":e[9]||(e[9]=r=>M(g)?g.value=r:null),page:o(l),"onUpdate:page":e[10]||(e[10]=r=>M(l)?l.value=r:null),headers:s,"show-select":"",items:o(R),"items-length":o(B).total,class:"text-no-wrap","onUpdate:options":X},{"item.gender":n(({item:r})=>{var $;return[a(Te,{size:"30",variant:"tonal",color:($=V(r.gender))==null?void 0:$.color,class:"me-4"},{default:n(()=>{var ee;return[a(W,{icon:(ee=V(r.gender))==null?void 0:ee.icon,size:"18"},null,8,["icon"])]}),_:2},1032,["color"])]}),"item.stock":n(({item:r})=>[a(Ee,{id:("useId"in t?t.useId:o(Me))(),"model-value":r.name},null,8,["id","model-value"])]),"item.status":n(({item:r})=>[a(Re,ke(i(r.status),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":n(({item:r})=>[a(Z,{onClick:$=>me(r)},{default:n(()=>[a(W,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(Z,null,{default:n(()=>[a(W,{icon:"tabler-dots-vertical"}),a(De,{activator:"parent"},{default:n(()=>[a(Ne,null,{default:n(()=>[r.status==="active"?(N(),K(le,{key:0,value:"delete","prepend-icon":"tabler-x",onClick:$=>k(r.id),"base-color":"error"},{default:n(()=>e[13]||(e[13]=[D(" Deactive ")])),_:2},1032,["onClick"])):J("",!0),r.status==="inactive"?(N(),K(le,{key:1,value:"reactivate","prepend-icon":"tabler-check",onClick:$=>L(r.id),"base-color":"success"},{default:n(()=>e[14]||(e[14]=[D(" Activate ")])),_:2},1032,["onClick"])):J("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:n(()=>[a(pe,{page:o(l),"onUpdate:page":e[7]||(e[7]=r=>M(l)?l.value=r:null),"items-per-page":o(B).perPage,"total-items":o(B).total},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1})])}}}),Pa={__name:"index",setup(P){return(_,d)=>(N(),ne("div",null,[a(Le)]))}};export{Pa as default};
