import{_ as Be}from"./Dy-GdebM.js";import{_ as Ce}from"./4KJD6TD-.js";import{r as m,d as ve,L as re,w as P,i as L,M as te,I as w,l as d,a as s,q as n,b as e,s as f,c as V,v as q,J as h,A,o as p,u as Me,B as $e,D as Ye,E as Se,G as je,y as I,F as X,H as Z,N as Te}from"./BSGE5GTI.js";import{u as pe}from"./5UtrR0G_.js";import{u as Le}from"./D_VAc04L.js";import{u as T}from"./BLyE8agl.js";import{c as Ae}from"./DzMSTMj6.js";import{V as fe}from"./D77b0ex7.js";import{V as ue}from"./DF6IzxTq.js";import{V as de}from"./J9FyYICg.js";import{V as Y}from"./CnJXHhAe.js";import{V as Ne}from"./DGJLOgtI.js";import{u as Ue}from"./CkL3z1VM.js";import{u as Ee}from"./2xX9dgA3.js";import{V as ce}from"./3PW_WoF_.js";import{V as me}from"./CLLojKmd.js";import{V as He,a as ee}from"./BA1Q-Lks.js";import{V as Oe}from"./276_PEDG.js";import{V as Re}from"./CL7y6R7f.js";import{V as Fe}from"./8rRwvUle.js";import"./Z4zssqwt.js";import"./VtgzhqRg.js";import"./BFpEfhYG.js";import"./CsSRgOlO.js";import"./vbOnNZeH.js";import"./CNo6l2ZD.js";import"./DwApywtV.js";import"./B_ahJWon.js";import"./D1b0O_WH.js";import"./DVOIMO_o.js";/* empty css        */const Ie=""+new URL("congratulation.Oj3NRyFK.png",import.meta.url).href,Pe=()=>{const S=m([]),D=m(!1);return{bookings:S,loadingBookings:D,fetchBookings:async u=>{D.value=!0;try{const{data:v,response:b,error:c}=await T(Ae("/bookings",u)).json();return S.value=v.value.data||[],{data:v.value,response:b,error:c}}catch(v){return console.error("Error fetching coach:",v),{data:null,response:null,error:v}}finally{D.value=!1}},deleteBooking:async u=>await T(`/bookings/${u}`,{method:"DELETE"}),reactivateBooking:async u=>await T(`/bookings/${u}/reactivate`,{method:"PUT"}),storeBooking:async u=>await T("/bookings").post(u).json(),updateBooking:async(u,v)=>await T(`/bookings/${u}`).put(v).json()}},ze={class:"text-h4 text-center mb-2"},Ge={class:"rounded-lg overflow-hidden",style:{height:"350px"}},Qe=["src"],Je={class:"d-flex justify-space-between align-center"},Ke={key:2},We={class:"d-flex align-center"},Xe={class:"text-h6 text-md-h5 text-lg-h4"},Ze={class:"d-flex align-center mb-1"},et={class:"d-flex align-center mb-1"},tt={class:"d-flex align-center mb-1"},st={class:"d-flex align-center mb-1"},ot={class:"d-flex align-center mb-1"},lt={class:"text-h8 font-weight-light",style:{"min-height":"20px"}},at=["innerHTML"],nt={class:"text-h8 font-weight-light",style:{"min-height":"20px"}},it=["innerHTML"],rt={class:"pl-4"},ut=ve({__name:"BookScheduleDialog",props:{resource:{},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","submit"],setup(S,{emit:D}){pe();const x=S,o=D,r=m(x.resource?structuredClone(re(x.resource)):{id:"",name:"",store_id:"",parent_id:"",code:"",order:"",status:"active"});P(()=>x.resource,c=>{r.value=c?structuredClone(re(c)):{id:"",name:"",store_id:"",parent_id:"",code:"",order:"",status:"active"}},{deep:!0}),m({name:void 0,email:void 0,gender:void 0,phone:void 0});const _=m(!1);Le();const{storeBooking:B}=Pe(),u=async()=>{_.value=!0;const{data:c}=await B({schedule_id:r.value.id});c.value.schedule.id&&(r.value.booked=!0,b.value=!0,o("submit",c.value.schedule))},v=L(()=>te.unix(r.value.start_at).subtract(1,"day").set("hour",18).set("minute",0).set("second",0).format("dddd, DD MMMM YYYY (HH:mm)")),b=m(!1);return(c,t)=>{const $=Ce;return p(),w(Ne,{width:c.$vuetify.display.smAndDown?"auto":900,"model-value":x.isDialogVisible,"onUpdate:modelValue":t[1]||(t[1]=k=>c.$emit("update:isDialogVisible",k))},{default:d(()=>[s($,{onClick:t[0]||(t[0]=k=>c.$emit("update:isDialogVisible",!1))}),s(fe,{class:"pa-2 pa-sm-10"},{default:d(()=>[n(b)?(p(),w(ue,{key:1},{default:d(()=>[t[13]||(t[13]=e("h4",{class:"text-h4 text-center mb-2"}," Congratulation ",-1)),t[14]||(t[14]=e("div",{align:"center"},[e("img",{src:Ie,align:"center",style:{"max-width":"100%"}})],-1)),t[15]||(t[15]=e("p",null,"Congratulations, your class has been successfully booked. Check your class schedule in Your Profile.",-1)),s(A,{class:"w-100 mt-2","append-icon":"tabler-arrow-right",onClick:u,to:"/profile/my-schedule"},{default:d(()=>t[12]||(t[12]=[q(" My Schedule ")])),_:1})]),_:1})):(p(),w(ue,{key:0},{default:d(()=>{var k,C,g,N,U,z,E,H,O,R;return[e("h4",ze,f((k=n(r).class)==null?void 0:k.name),1),e("div",Ge,[e("img",{src:(C=n(r).class)==null?void 0:C.banner_url,alt:"Banner",style:{width:"100%",height:"100%","object-fit":"cover","object-position":"center"}},null,8,Qe)]),t[8]||(t[8]=e("div",{class:"mt-2"},null,-1)),e("div",Je,[((g=n(r).class)==null?void 0:g.type)=="private"?(p(),w(de,{key:0,color:"warning",density:"default",label:"",size:"small"},{default:d(()=>t[2]||(t[2]=[q("Private Class")])),_:1})):((N=n(r).class)==null?void 0:N.type)=="group"?(p(),w(de,{key:1,"base-color":"primary",density:"default",label:"",size:"small"},{default:d(()=>t[3]||(t[3]=[q("Group Class")])),_:1})):(p(),V("div",Ke)),e("span",We,[s(h,{icon:"tabler-stopwatch",class:"me-1"}),q(" "+f(n(r).duration_min)+" min ",1)])]),t[9]||(t[9]=e("div",{class:"mt-2"},null,-1)),e("div",Xe,f((U=n(r).class)==null?void 0:U.name),1),t[10]||(t[10]=e("div",{class:"mt-2"},null,-1)),e("div",Ze,[s(h,{icon:"tabler-yoga",class:"me-1"}),e("span",null,f((z=n(r).coach)==null?void 0:z.name),1)]),e("div",et,[s(h,{icon:"tabler-trending-up",class:"me-1"}),e("span",null,f((E=n(r).class)==null?void 0:E.name),1)]),e("div",tt,[s(h,{icon:"tabler-treadmill",class:"me-1"}),e("span",null,f((H=n(r).equipment)==null?void 0:H.name),1)]),e("div",st,[s(h,{icon:"tabler-calendar",class:"me-1"}),e("span",null,f(c.$dayjs.unix(n(r).start_at).format("dddd, DD MMMM")),1)]),e("div",ot,[s(h,{icon:"tabler-clock",class:"me-1"}),e("span",null,f(c.$dayjs.unix(n(r).start_at).format("HH:mm")),1)]),s(Y,{class:"my-4"}),e("div",null,[t[4]||(t[4]=e("div",{class:"text-h6 text-md-h5 text-lg-h4"},"Description : ",-1)),e("div",lt,[e("div",{innerHTML:(O=n(r).class)==null?void 0:O.description},null,8,at)])]),e("div",null,[t[5]||(t[5]=e("div",{class:"text-h6 text-md-h5 text-lg-h4"},"Requirement : ",-1)),e("div",nt,[e("div",{innerHTML:(R=n(r).class)==null?void 0:R.requirements},null,8,it)])]),s(Y,{class:"my-4"}),t[11]||(t[11]=e("div",{class:"text-h6 text-md-h5 text-lg-h4"},"Cancellation policy : ",-1)),e("div",null,[e("ul",rt,[e("li",null,"Batalkan sebelum "+f(n(v))+" untuk mendapatkan credit kembali.",1)])]),s(Y,{class:"my-4"}),e("div",null,[s(h,{icon:"tabler-info-circle"}),t[6]||(t[6]=q(" Booking this class will reduce your group credits. "))]),s(A,{class:"w-100 mt-2",onClick:u},{default:d(()=>t[7]||(t[7]=[q(" Book Now ")])),_:1})]}),_:1}))]),_:1})]),_:1},8,["width","model-value"])}}}),dt={class:"landing-page-wrapper"},ct={class:"d-flex flex-wrap gap-4 my-4 mx-6"},mt={class:"d-flex align-center justify-space-between px-4"},vt=["disabled"],pt={class:"text-subtitle-1 font-weight-medium d-flex align-center"},ft={class:"d-flex flex-column"},yt={class:"",width:"80"},gt={class:"text-base font-weight-medium"},bt={key:0},ht={class:"d-flex flex-column"},_t={class:"d-flex justify-space-between align-center"},kt={class:"py-3"},xt={class:"font-weight-medium mb-1"},Vt={class:"text--secondary mb-2"},qt={class:"d-flex align-center gap-4"},wt={class:"d-flex align-center gap-4"},Dt={class:"d-flex flex-column align-end"},Bt={class:"mb-2 text-caption text--secondary"},Ct={key:1,class:"border-1 text-center py-5",style:{"background-color":"#f5f5f5"}},is=ve({__name:"timetable",setup(S){const D=Me();D.skin="default";const x=Ue(),o=$e(),r=je(),_=m(o.query.status||void 0),B=m(o.query.category||void 0),u=m(o.query.class||void 0),v=m(o.query.equipment||void 0),b=m(o.query.level||void 0),c=m(o.query.coach||void 0),t=m(o.query.q||""),$=m(o.query.type||""),k=te(),C=k.format("YYYY-MM-DD"),g=m(o.query.date||k.format("YYYY-MM-DD")),N=()=>{const a={...o.query,q:t.value||void 0,status:_.value||void 0,equipment:v.value||void 0,level:b.value||void 0,category:B.value||void 0,class:u.value||void 0,type:$.value||void 0,coach:c.value||void 0,date:g.value||void 0};Object.keys(a).forEach(l=>{a[l]===void 0&&delete a[l]}),r.replace({query:a})};P([t,_,B,u,v,b,$,c,g],()=>{N()}),P(()=>o.query,()=>{(o.query.q!==t.value||o.query.status!==_.value||o.query.category!==B.value||o.query.class!==u.value||o.query.equipment!==v.value||o.query.level!==b.value||o.query.type!==$.value||o.query.date!==g.value||o.query.coach!==c.value)&&(_.value=o.query.status||void 0,B.value=o.query.category||void 0,u.value=o.query.class||void 0,v.value=o.query.equipment||void 0,b.value=o.query.level||void 0,g.value=o.query.date||"",c.value=o.query.type||void 0),oe()},{deep:!0});const{status:U,categories:z,equipments:E,levels:H,classes:O}=Ye(x),R=async()=>{try{x.fetchOptions("classes","/options/classes"),x.fetchOptions("equipments","/options/class-equipments"),x.fetchOptions("levels","/options/class-levels"),ye()}catch(a){console.error("Failed to fetch filter options:",a)}},ye=()=>{_.value&&!U.value.some(a=>a.value===_.value)&&(_.value="")},{fetchTimetables:ge}=Ee(),se=m({}),oe=async()=>{const a={q:t.value,equipment:v.value,level:b.value,class:u.value,coach:c.value,status:_.value,type:$.value,date:g.value},{data:l,response:M,error:i}=await ge({query:a});return se.value=l,{data:l,response:M,error:i}};Se(async()=>{R(),await oe()});const j=m(0),G=L(()=>k.startOf("month").add(j.value,"month")),le=L(()=>{const a=G.value.daysInMonth();return Array.from({length:a},(l,M)=>{const i=G.value.date(M+1);return i.isBefore(k,"day")&&Q.value?null:i.format("YYYY-MM-DD")}).filter(Boolean)}),be=L(()=>G.value.format("MMMM YYYY")),Q=L(()=>j.value===0),he=()=>{(j.value>0||!Q.value)&&j.value--},_e=()=>{j.value++};P(le,a=>{g.value=a.includes(C)?C:a[0]??""});const ke=a=>te(a).isBefore(k,"day"),xe=a=>g.value===a||a===C?"primary":"default",Ve=a=>g.value===a?"flat":a===C?"plain":"text",{userData:qe}=pe(),J=m(!1),K=m(null),we=a=>{var l;(l=qe.value)!=null&&l.id?(K.value=a,J.value=!0):r.push("/login")},De=a=>{K.value.is_available=!1};return(a,l)=>{const M=Be;return p(),V("div",dt,[l[9]||(l[9]=e("div",{style:{height:"90px"}},null,-1)),s(ce,null,{default:d(()=>[s(ut,{"is-dialog-visible":n(J),resource:n(K),"onUpdate:isDialogVisible":l[0]||(l[0]=i=>J.value=i),onSubmit:De},null,8,["is-dialog-visible","resource"]),s(fe,null,{default:d(()=>[e("div",ct,[l[5]||(l[5]=e("div",{class:"font-weight-medium text-lg align-self-center"},"Timetable",-1)),s(me),s(ce,{class:"pa-0 w-75",fluid:""},{default:d(()=>[s(me),s(He,{class:"ma-0",dense:""},{default:d(()=>[s(ee,{cols:"12",sm:"4",md:"4"},{default:d(()=>[s(M,{modelValue:n(u),"onUpdate:modelValue":l[1]||(l[1]=i=>I(u)?u.value=i:null),placeholder:"All Class",items:n(O),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),s(ee,{cols:"12",sm:"4",md:"4"},{default:d(()=>[s(M,{modelValue:n(b),"onUpdate:modelValue":l[2]||(l[2]=i=>I(b)?b.value=i:null),placeholder:"All Level",items:n(H),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),s(ee,{cols:"12",sm:"4",md:"4"},{default:d(()=>[s(M,{modelValue:n(v),"onUpdate:modelValue":l[3]||(l[3]=i=>I(v)?v.value=i:null),placeholder:"All Equipment",items:n(E),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),s(Y,{class:"mt-4"}),e("div",mt,[e("div",{icon:"",onClick:he,disabled:n(Q),class:"pt-4 pb-4"},[s(h,{icon:"tabler-chevron-left"})],8,vt),e("span",pt,[q(f(n(be))+" ",1),s(h,{icon:"tabler-calendar",class:"ml-2"})]),e("div",{icon:"",onClick:_e,class:"pt-4 pb-4"},[s(h,{icon:"tabler-chevron-right"})])]),s(Y),s(Oe,{modelValue:n(g),"onUpdate:modelValue":l[4]||(l[4]=i=>I(g)?g.value=i:null),class:"pa-4"},{default:d(()=>[(p(!0),V(X,null,Z(n(le),(i,F)=>(p(),w(Fe,{key:F,value:i},{default:d(()=>[s(A,{color:xe(i),variant:Ve(i),disabled:ke(i),class:"ma-1 pt-4 pb-4 pl-0 pr-0",onClick:y=>g.value=i,style:{height:"auto"}},{default:d(()=>[e("div",ft,[e("div",null,f(a.$dayjs(i).format("ddd")),1),e("div",null,f(a.$dayjs(i).format("DD")),1)])]),_:2},1032,["color","variant","disabled","onClick"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(Re,{class:"bordered-table"},{default:d(()=>[e("tbody",null,[(p(!0),V(X,null,Z(n(se),(i,F)=>(p(),V("tr",{key:F},[e("td",yt,[e("h3",gt,f(F),1)]),i.length?(p(),V("td",bt,[e("div",ht,[(p(!0),V(X,null,Z(i,(y,W)=>{var ae,ne,ie;return p(),V("div",{key:W},[e("div",_t,[e("div",kt,[e("div",xt,f((ae=y==null?void 0:y.class)==null?void 0:ae.name),1),e("div",Vt,f((ne=y==null?void 0:y.coach)==null?void 0:ne.name),1),e("div",qt,[s(h,{icon:"tabler-trending-up"}),e("span",null,f(y==null?void 0:y.level_name),1)]),e("div",wt,[s(h,{icon:"tabler-treadmill"}),e("span",null,f((ie=y==null?void 0:y.equipment)==null?void 0:ie.name),1)])]),e("div",Dt,[e("span",Bt,f(y.capacity-y.booked)+" left",1),y.is_available?(p(),w(A,{key:0,size:"small",color:"primary",onClick:Mt=>we(y)},{default:d(()=>l[6]||(l[6]=[q("Book Now")])),_:2},1032,["onClick"])):(p(),w(A,{key:1,size:"small",color:"secondary",disabled:""},{default:d(()=>l[7]||(l[7]=[q("Booked")])),_:1}))])]),e("div",null,[W<i.length-1?(p(),w(Y,{key:"divider-"+W})):Te("",!0)])])}),128))])])):(p(),V("td",Ct,l[8]||(l[8]=[e("span",{class:"text--disabled"},"No classes available",-1)])))]))),128))])]),_:1})]),_:1})]),_:1})])}}});export{is as default};
