import{c2 as u,bA as i,j as l}from"./BSGE5GTI.js";const o=i().public.apiBaseUrl;function s(){var r,t,a;return((a=(t=(r=window==null?void 0:window.location)==null?void 0:r.hostname)==null?void 0:t.split("."))==null?void 0:a[0])||""}const h=u({baseUrl:o,fetchOptions:{headers:{Accept:"application/json","X-PROJECT-ORIGIN":s()}},options:{refetch:!0,async beforeFetch({options:r}){const t=l("auth.token").value;return t&&(r.headers={...r.headers,Authorization:`Bearer ${t}`}),{options:r}},onFetchError:async({data:r,response:t,error:a})=>{try{const c=r??await(t==null?void 0:t.clone().json().catch(()=>null)),n={status:t==null?void 0:t.status,message:(c==null?void 0:c.message)||(a==null?void 0:a.message)||"Unknown error",data:c};return{data:null,response:t,error:n}}catch{const n={status:t==null?void 0:t.status,message:(a==null?void 0:a.message)||"Unknown error",originalError:a};return{data:null,response:t,error:n}}},afterFetch:async({data:r,response:t})=>{try{if(!t.ok){const c=await t.clone().json().catch(()=>null),n={status:t.status,message:(c==null?void 0:c.message)||`Request failed with status ${t.status}`,data:c};return{data:null,response:t,error:n}}return{data:r??await t.clone().json().catch(()=>null),response:t,error:null}}catch(a){console.warn("Error processing response:",{status:t==null?void 0:t.status,error:a instanceof Error?a.message:String(a)});const c={status:t==null?void 0:t.status,message:a instanceof Error?a.message:"Unknown error during response processing",originalError:a instanceof Error?a:new Error(String(a))};return{data:null,response:t,error:c}}}}});export{h as u};
