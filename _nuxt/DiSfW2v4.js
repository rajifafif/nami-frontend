import{_ as ce}from"./4KJD6TD-.js";import{_ as te}from"./BXxHOZkN.js";import{_ as pe}from"./B__ysSUc.js";import{d as le,r as d,L as O,w as x,D as oe,I as K,l as s,a,b as $,s as ve,x as fe,N as j,q as o,A as J,v as A,o as D,y as k,R as ge,B as ye,C as be,E as Ve,c as re,K as _e,J as W,S as he,z as Ce,G as ke}from"./BSGE5GTI.js";import{u as se}from"./CkL3z1VM.js";import{u as ie}from"./BgEmvsrc.js";import{V as ue}from"./D77b0ex7.js";import{V as we}from"./DF6IzxTq.js";import{V as qe}from"./CGIYWge0.js";import{V as Pe,a as B}from"./BA1Q-Lks.js";import{V as Be}from"./DGJLOgtI.js";import{_ as Se}from"./Dy-GdebM.js";import{_ as xe}from"./C8Wvh8wb.js";import{V as $e}from"./CLLojKmd.js";import{V as ee}from"./CnJXHhAe.js";import{V as Ae}from"./BkqMEpij.js";import{V as De}from"./DwApywtV.js";import{V as Ue,a as ae}from"./CsSRgOlO.js";import{V as Ne}from"./J9FyYICg.js";import{V as Re}from"./DIFYFz4Q.js";import{V as Fe}from"./CNo6l2ZD.js";import"./Z4zssqwt.js";import"./BFpEfhYG.js";import"./VtgzhqRg.js";import"./D1b0O_WH.js";import"./DVOIMO_o.js";import"./B_ahJWon.js";import"./DiwIzWSr.js";import"./BLyE8agl.js";import"./DzMSTMj6.js";/* empty css        */import"./TnX_cM-C.js";import"./CL7y6R7f.js";import"./vbOnNZeH.js";import"./276_PEDG.js";const Te={class:"text-h4 text-center mb-2"},Ie=le({__name:"AddEditCoachDialog",props:{resource:{default:()=>({id:"",name:"",gender:null,email:"",phone:"",kecamatan_id:null,kecamatan_name:""})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","submit"],setup(F,{emit:U}){var V;const{showSnackbar:u}=ge(),_=F,p=U,n=d(structuredClone(O(_.resource)));x(()=>_.resource,r=>{n.value=structuredClone(O(r))},{deep:!0});const f=d({name:void 0,email:void 0,gender:void 0,phone:void 0}),g=d(!1),v=()=>{p("update:isDialogVisible",!1),n.value=structuredClone(O(_.resource))},m=async()=>{try{if(n.value.id){const r=await N();r!=null&&r.id&&(p("update:isDialogVisible",!1),p("submit",r))}else{const r=await M();r!=null&&r.id&&(p("update:isDialogVisible",!1),p("submit",r))}}catch(r){console.error("Failed to submit form:",r)}},b=se(),{status:h,genders:P}=oe(b),T=d(""),w=d([]),{fetchWilayah:I}=b,H=async()=>{I(T.value).then(({data:r})=>{console.log("ss",r.value.data),w.value=r.value.data})},E=d(((V=_.resource)==null?void 0:V.kecamatan_id)??null),{storeCoach:Q,updateCoach:G}=ie(),M=async()=>{var r;try{f.value={},g.value=!0,delete n.value.id;const{data:i,error:y,response:C}=await Q(n.value);if(y.value){f.value=((r=y.value.data)==null?void 0:r.errors)??{},u(y.value.message,"error"),g.value=!1;return}return g.value=!1,i.value}catch(i){console.error("Failed to delete class:",i)}finally{g.value=!1}},N=async()=>{var r;try{f.value={},g.value=!0;const{data:i,error:y,response:C}=await G(n.value.id,n.value);if(y.value){f.value=((r=y.value.data)==null?void 0:r.errors)??{},u(y.value.message,"error"),g.value=!1;return}return g.value=!1,i.value}catch(i){console.error("Failed to delete class:",i)}finally{g.value=!1}};return(r,i)=>{const y=ce,C=te,z=pe;return D(),K(Be,{width:r.$vuetify.display.smAndDown?"auto":900,"model-value":_.isDialogVisible,"onUpdate:modelValue":i[7]||(i[7]=c=>r.$emit("update:isDialogVisible",c))},{default:s(()=>[a(y,{onClick:i[0]||(i[0]=c=>r.$emit("update:isDialogVisible",!1))}),a(ue,{class:"pa-2 pa-sm-10"},{default:s(()=>[a(we,null,{default:s(()=>[$("h4",Te,ve(_.resource.id?"Edit":"Add New")+" Coach ",1),a(qe,{onSubmit:fe(m,["prevent"])},{default:s(()=>[a(Pe,null,{default:s(()=>[a(B,{cols:"12"},{default:s(()=>[a(C,{modelValue:o(n).name,"onUpdate:modelValue":i[1]||(i[1]=c=>o(n).name=c),label:"Name",placeholder:"Full Name","error-messages":o(f).name},null,8,["modelValue","error-messages"])]),_:1}),a(B,{cols:"12"},{default:s(()=>[a(z,{modelValue:o(n).gender,"onUpdate:modelValue":i[2]||(i[2]=c=>o(n).gender=c),label:"Select Gender",placeholder:"Select Gender",items:o(P),clearable:!0,"error-messages":o(f).gender},null,8,["modelValue","items","error-messages"])]),_:1}),a(B,{cols:"12"},{default:s(()=>[a(C,{modelValue:o(n).email,"onUpdate:modelValue":i[3]||(i[3]=c=>o(n).email=c),label:"E-Mail",placeholder:"user@gmail.com","error-messages":o(f).email},null,8,["modelValue","error-messages"])]),_:1}),a(B,{cols:"12"},{default:s(()=>[a(C,{modelValue:o(n).phone,"onUpdate:modelValue":i[4]||(i[4]=c=>o(n).phone=c),label:"Phone",placeholder:"089999999","error-messages":o(f).phone},null,8,["modelValue","error-messages"])]),_:1}),a(B,{cols:"12"},{default:s(()=>[a(C,{label:"Password (default)",placeholder:"password",disabled:""})]),_:1}),j("",!0),a(B,{cols:"12",class:"text-center"},{default:s(()=>[a(J,{type:"submit",class:"me-3",loading:o(g)},{default:s(()=>i[8]||(i[8]=[A(" Submit ")])),_:1},8,["loading"]),a(J,{variant:"tonal",color:"secondary",onClick:v},{default:s(()=>i[9]||(i[9]=[A(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),Ee={class:"d-flex flex-wrap gap-4 my-4 mx-6"},Qe={class:"d-flex gap-4 flex-wrap align-center"},Ge={class:"d-flex flex-wrap gap-4 ma-6"},Me=le({__name:"Coach",setup(F){const U=se(),u=ye(),_=ke(),p=d(u.query.status||void 0),n=d(u.query.q||""),f=d(n.value),g=d([]),v=d(Number(u.query.itemsPerPage)||15),m=d(Number(u.query.page)||1),b=d(u.query.sortBy||void 0),h=d(u.query.orderBy||void 0),P=d({currentPage:m.value,lastPage:1,total:0,perPage:v.value}),T=()=>{console.log("updateQueryParams");const t={...u.query,q:n.value||void 0,status:p.value||void 0,page:m.value!==1?String(m.value):void 0,itemsPerPage:v.value!==15?String(v.value):void 0,sortBy:b.value||void 0,orderBy:h.value||void 0};Object.keys(t).forEach(e=>{t[e]===void 0&&delete t[e]}),_.replace({query:t})};x([n,p,v,m,b,h],()=>{T()}),x(()=>u.query,()=>{(u.query.q!==n.value||u.query.status!==p.value||Number(u.query.page||1)!==m.value||Number(u.query.itemsPerPage||15)!==v.value||u.query.sortBy!==b.value||u.query.orderBy!==h.value)&&(n.value=u.query.q||"",p.value=u.query.status||void 0,m.value=Number(u.query.page)||1,v.value=Number(u.query.itemsPerPage)||15,b.value=u.query.sortBy||void 0,h.value=u.query.orderBy||void 0),V()},{deep:!0});let w=null;x(f,t=>{w&&clearTimeout(w),w=setTimeout(()=>{n.value=t,m.value!==1&&(m.value=1)},500)}),be(()=>{w&&clearTimeout(w)});const{status:I}=oe(U),H=t=>{var e,q;m.value=t.page,v.value=t.itemsPerPage,t.sortBy&&t.sortBy.length>0?(b.value=(e=t.sortBy[0])==null?void 0:e.key,h.value=(q=t.sortBy[0])==null?void 0:q.order):(b.value=void 0,h.value=void 0)},E=d(null),{fetchCoaches:Q,deleteCoach:G,reactivateCoach:M}=ie(),N=d([]),V=async()=>{const t={q:n.value,status:p.value,page:m.value,per_page:v.value,sort_by:b.value,order_by:h.value},{data:e,response:q,error:L}=await Q({query:t});return N.value=e.data,E.value=e,{data:e,response:q,error:L}};x(E,t=>{t&&(P.value={currentPage:t.current_page,lastPage:t.last_page,total:t.total,perPage:t.per_page},m.value=t.current_page,v.value=t.per_page)},{deep:!0});const r=[{title:"Name",key:"name",sortable:!0,align:"start"},{title:"E-Mail",key:"email",sortable:!0,align:"start"},{title:"Phone",key:"phone",sortable:!0,align:"start"},{title:"Gender",key:"gender",sortable:!0,align:"center"},{title:"Status",key:"status",sortable:!1,align:"end",width:100},{title:"Actions",key:"actions",sortable:!1,align:"end",width:100}],i=t=>{if(t==="active")return{text:"Active",color:"success"};if(t==="inactive")return{text:"Inactive",color:"error"}},y=t=>{if(t==="M")return{color:"primary",icon:"tabler-mars"};if(t==="F")return{color:"error",icon:"tabler-venus"}},C=async t=>{try{await G(t),V()}catch(e){console.error("Failed to delete class:",e)}},z=async t=>{try{await M(t),V()}catch(e){console.error("Failed to delete class:",e)}};Ve(async()=>{await V()});const c=d(!1),R=d(!1),X=d(null),ne=t=>{X.value=t,R.value=!0};return(t,e)=>{const q=Ie,L=te,de=Se,Y=_e("IconBtn"),me=xe;return D(),re("div",null,[a(ue,null,{default:s(()=>[$("div",Ee,[e[12]||(e[12]=$("div",{class:"font-weight-medium text-lg align-self-center"},"Coach",-1)),a($e),$("div",Qe,[a(J,{color:"primary","prepend-icon":"tabler-plus",onClick:e[0]||(e[0]=()=>{c.value=!0})},{default:s(()=>e[11]||(e[11]=[A(" Add Coach ")])),_:1}),a(q,{"is-dialog-visible":o(c),"onUpdate:isDialogVisible":e[1]||(e[1]=l=>k(c)?c.value=l:null),onSubmit:e[2]||(e[2]=l=>V())},null,8,["is-dialog-visible"]),a(q,{"is-dialog-visible":o(R),"onUpdate:isDialogVisible":e[3]||(e[3]=l=>k(R)?R.value=l:null),resource:o(X),onSubmit:e[4]||(e[4]=l=>V())},null,8,["is-dialog-visible","resource"])])]),a(ee),$("div",Ge,[a(L,{modelValue:o(f),"onUpdate:modelValue":e[5]||(e[5]=l=>k(f)?f.value=l:null),placeholder:"Search",clearable:"",style:{"min-width":"200px"}},null,8,["modelValue"]),a(de,{modelValue:o(p),"onUpdate:modelValue":e[6]||(e[6]=l=>k(p)?p.value=l:null),placeholder:"Status",items:o(I),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),a(ee,{class:"mt-4"}),a(Ae,{"items-per-page":o(v),"onUpdate:itemsPerPage":e[8]||(e[8]=l=>k(v)?v.value=l:null),"model-value":o(g),"onUpdate:modelValue":e[9]||(e[9]=l=>k(g)?g.value=l:null),page:o(m),"onUpdate:page":e[10]||(e[10]=l=>k(m)?m.value=l:null),headers:r,"show-select":"",items:o(N),"items-length":o(P).total,class:"text-no-wrap","onUpdate:options":H},{"item.gender":s(({item:l})=>{var S;return[a(Fe,{size:"30",variant:"tonal",color:(S=y(l.gender))==null?void 0:S.color,class:"me-4"},{default:s(()=>{var Z;return[a(W,{icon:(Z=y(l.gender))==null?void 0:Z.icon,size:"18"},null,8,["icon"])]}),_:2},1032,["color"])]}),"item.stock":s(({item:l})=>[a(Re,{id:("useId"in t?t.useId:o(Ce))(),"model-value":l.name},null,8,["id","model-value"])]),"item.status":s(({item:l})=>[a(Ne,he(i(l.status),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":s(({item:l})=>[a(Y,{onClick:S=>ne(l)},{default:s(()=>[a(W,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(Y,null,{default:s(()=>[a(W,{icon:"tabler-dots-vertical"}),a(De,{activator:"parent"},{default:s(()=>[a(Ue,null,{default:s(()=>[l.status==="active"?(D(),K(ae,{key:0,value:"delete","prepend-icon":"tabler-x",onClick:S=>C(l.id),"base-color":"error"},{default:s(()=>e[13]||(e[13]=[A(" Deactive ")])),_:2},1032,["onClick"])):j("",!0),l.status==="inactive"?(D(),K(ae,{key:1,value:"reactivate","prepend-icon":"tabler-check",onClick:S=>z(l.id),"base-color":"success"},{default:s(()=>e[14]||(e[14]=[A(" Activate ")])),_:2},1032,["onClick"])):j("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[a(me,{page:o(m),"onUpdate:page":e[7]||(e[7]=l=>k(m)?m.value=l:null),"items-per-page":o(P).perPage,"total-items":o(P).total},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1})])}}}),wa={__name:"index",setup(F){return(U,u)=>(D(),re("div",null,[a(Me)]))}};export{wa as default};
