import{_ as fe}from"./4KJD6TD-.js";import{_ as se}from"./BXxHOZkN.js";import{_ as Ie}from"./B__ysSUc.js";import{_ as Ae}from"./CZmP9VjC.js";import{a3 as Re,a6 as $e,a7 as Le,a9 as Ne,ab as ye,i as M,as as ue,r as b,w as R,af as Ue,at as Te,a as e,F as le,S as Z,aj as Ee,ad as je,au as ze,d as re,D as ge,L as K,I as H,l as u,b as B,s as ae,q as i,x as be,N as ee,y as U,A as W,J as oe,v as O,o as Q,R as Ve,B as Me,C as Oe,E as Qe,c as Ge,K as Je,G as Ke}from"./BSGE5GTI.js";import{u as _e}from"./CkL3z1VM.js";import{u as He}from"./D5Lki4RC.js";import{V as ne}from"./D77b0ex7.js";import{V as Ce}from"./DF6IzxTq.js";import{V as ke}from"./CGIYWge0.js";import{V as we,a as I}from"./BA1Q-Lks.js";import{a as de,b as We,c as Xe}from"./BFpEfhYG.js";import{a as Ye,b as ce,m as Ze,V as me}from"./Z4zssqwt.js";import{V as qe}from"./J9FyYICg.js";import{V as De}from"./DGJLOgtI.js";import{u as xe}from"./D_VAc04L.js";import{_ as et}from"./C8Wvh8wb.js";import{V as tt}from"./CLLojKmd.js";import{V as ve}from"./CnJXHhAe.js";import{V as lt}from"./BkqMEpij.js";import{V as at}from"./DwApywtV.js";import{V as ot,a as pe}from"./CsSRgOlO.js";const st=$e({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:t=>typeof t=="boolean"||[1e3,1024].includes(Number(t))},...Ze({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:t=>t.multiple?[]:null,validator:t=>ye(t).every(h=>h!=null&&typeof h=="object")},...Xe({clearable:!0})},"VFileInput"),rt=Re()({name:"VFileInput",inheritAttrs:!1,props:st(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,h){let{attrs:v,emit:V,slots:p}=h;const{t:d}=Le(),f=Ne(t,"modelValue",t.modelValue,a=>ye(a),a=>!t.multiple&&Array.isArray(a)?a[0]:a),{isFocused:C,focus:k,blur:_}=Ye(t),D=M(()=>typeof t.showSize!="boolean"?t.showSize:void 0),x=M(()=>(f.value??[]).reduce((a,n)=>{let{size:L=0}=n;return a+L},0)),r=M(()=>ue(x.value,D.value)),S=M(()=>(f.value??[]).map(a=>{const{name:n="",size:L=0}=a;return t.showSize?`${n} (${ue(L,D.value)})`:n})),s=M(()=>{var n;const a=((n=f.value)==null?void 0:n.length)??0;return t.showSize?d(t.counterSizeString,a,r.value):d(t.counterString,a)}),g=b(),q=b(),w=b(),F=M(()=>C.value||t.active),G=M(()=>["plain","underlined"].includes(t.variant));function T(){var a;w.value!==document.activeElement&&((a=w.value)==null||a.focus()),C.value||k()}function J(a){var n;(n=w.value)==null||n.click()}function o(a){V("mousedown:control",a)}function c(a){var n;(n=w.value)==null||n.click(),V("click:control",a)}function P(a){a.stopPropagation(),T(),je(()=>{f.value=[],ze(t["onClick:clear"],a)})}function $(a){a.preventDefault()}function X(a){a.preventDefault(),a.dataTransfer&&(f.value=[...a.dataTransfer.files??[]])}return R(f,a=>{(!Array.isArray(a)||!a.length)&&w.value&&(w.value.value="")}),Ue(()=>{const a=!!(p.counter||t.counter),n=!!(a||p.details),[L,te]=Te(v),{modelValue:m,...l}=ce.filterProps(t),A=de.filterProps(t);return e(ce,Z({ref:g,modelValue:t.multiple?f.value:f.value[0],class:["v-file-input",{"v-file-input--chips":!!t.chips,"v-file-input--hide":t.hideInput,"v-input--plain-underlined":G.value},t.class],style:t.style,"onClick:prepend":J},L,l,{centerAffix:!G.value,focused:C.value}),{...p,default:E=>{let{id:j,isDisabled:z,isDirty:y,isReadonly:Y,isValid:Pe}=E;return e(de,Z({ref:q,"prepend-icon":t.prependIcon,onMousedown:o,onClick:c,"onClick:clear":P,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},A,{id:j.value,active:F.value||y.value,dirty:y.value||t.dirty,disabled:z.value,focused:C.value,error:Pe.value===!1,onDragover:$,onDrop:X}),{...p,default:Se=>{var ie;let{props:{class:Be,...he}}=Se;return e(le,null,[e("input",Z({ref:w,type:"file",readonly:Y.value,disabled:z.value,multiple:t.multiple,name:t.name,onClick:N=>{N.stopPropagation(),Y.value&&N.preventDefault(),T()},onChange:N=>{if(!N.target)return;const Fe=N.target;f.value=[...Fe.files??[]]},onFocus:T,onBlur:_},he,te),null),e("div",{class:Be},[!!((ie=f.value)!=null&&ie.length)&&!t.hideInput&&(p.selection?p.selection({fileNames:S.value,totalBytes:x.value,totalBytesReadable:r.value}):t.chips?S.value.map(N=>e(qe,{key:N,size:"small",text:N},null)):S.value.join(", "))])])}})},details:n?E=>{var j,z;return e(le,null,[(j=p.details)==null?void 0:j.call(p,E),a&&e(le,null,[e("span",null,null),e(We,{active:!!((z=f.value)!=null&&z.length),value:s.value,disabled:t.disabled},p.counter)])])}:void 0})}),Ee({},g,q,w)}}),nt={class:"text-h4 text-center mb-2"},it={class:"d-flex flex-column align-center pa-4 rounded-lg",style:{"background-color":"#f9f9f9"}},ut={class:"rounded-lg overflow-hidden mb-2 elevation-2",style:{height:"250px",width:"300px",position:"relative"}},dt=["src"],ct={style:{position:"absolute",top:"0",right:"0"}},Tt=re({__name:"AddEditClassDialog",props:{resource:{default:()=>({id:"",name:"",code:"",equipment_id:null,category_id:null,level_id:null,description:"",requirements:"",duration_min:60,status:"active",type:""})},isDialogVisible:{type:Boolean},type:{}},emits:["update:isDialogVisible","submit"],setup(t,{emit:h}){const{showSnackbar:v}=Ve(),V=t,p=h,d=b(null),f=b(null),C=_e(),{status:k,categories:_,equipments:D,levels:x}=ge(C),r=b(V.resource?{...structuredClone(K(V.resource)),type:V.type}:{id:"",name:"",code:"",equipment_id:null,category_id:null,level_id:null,description:"",requirements:"",duration_min:60,status:"active",type:V.type});R(()=>V.resource,o=>{r.value=o?{...structuredClone(K(o)),type:V.type}:{id:"",name:"",code:"",equipment_id:null,category_id:null,level_id:null,description:"",requirements:"",duration_min:60,status:"active",type:V.type},d.value=null},{deep:!0}),R(d,o=>{o?f.value=URL.createObjectURL(o):f.value=null});const S=b({name:void 0,email:void 0,gender:void 0,phone:void 0}),s=b(!1),g=()=>{var o;p("update:isDialogVisible",!1),(o=V.resource)!=null&&o.id?r.value=structuredClone(K(V.resource)):r.value={id:"",name:"",code:"",equipment_id:"",description:"",requirements:"",duration_min:60,type:V.type}};R(()=>V.isDialogVisible,(o,c)=>{o||(g(),d.value=null)});const q=async()=>{try{if(r.value.id){const o=await T();o!=null&&o.id&&(p("update:isDialogVisible",!1),p("submit",o))}else{const o=await G();console.log("askdjnaksdjnaksdmasdjnaksjdnkj"),o!=null&&o.id&&(p("update:isDialogVisible",!1),p("submit",o))}}catch(o){console.error("Failed to submit form:",o)}},{storeClass:w,updateClass:F}=He(),G=async()=>{var o;try{S.value={},s.value=!0,delete r.value.id,d.value&&(r.value.banner=d.value);const{data:c,error:P,response:$}=await w(r.value);if(P.value){S.value=((o=P.value.data)==null?void 0:o.errors)??{},v(P.value.message,"error"),s.value=!1;return}return s.value=!1,c.value}catch(c){console.error("Failed to delete class:",c)}finally{s.value=!1}},T=async()=>{var o;try{S.value={},s.value=!0,d.value&&(r.value.banner=d.value);const{data:c,error:P,response:$}=await F(r.value.id??"",r.value);if(P.value){S.value=((o=P.value.data)==null?void 0:o.errors)??{},v(P.value.message,"error"),s.value=!1;return}return s.value=!1,c.value}catch(c){console.error("Failed to delete class:",c)}finally{s.value=!1}},J=()=>{d.value=null,f.value=null,r.value.banner_url&&(r.value.banner_url=null,console.log("Deleting image from resource..."))};return(o,c)=>{const P=fe,$=se,X=Ie,a=Ae;return Q(),H(De,{width:o.$vuetify.display.smAndDown?"auto":900,"model-value":V.isDialogVisible,"onUpdate:modelValue":c[7]||(c[7]=n=>o.$emit("update:isDialogVisible",n))},{default:u(()=>[e(P,{onClick:c[0]||(c[0]=n=>o.$emit("update:isDialogVisible",!1))}),e(ne,{class:"pa-2 pa-sm-10"},{default:u(()=>[e(Ce,null,{default:u(()=>[B("h4",nt,ae(i(r).id?"Edit":"Add New")+" "+ae(V.type=="group"?"Group":"Private")+" Class ",1),e(ke,{onSubmit:be(q,["prevent"])},{default:u(()=>[e(we,null,{default:u(()=>[e(I,{cols:"12"},{default:u(()=>[e($,{modelValue:i(r).name,"onUpdate:modelValue":c[1]||(c[1]=n=>i(r).name=n),label:"Name",placeholder:"Reformer Flow",autofocus:""},null,8,["modelValue"])]),_:1}),e(I,{cols:"12"},{default:u(()=>[e(rt,{label:"Banner Image","prepend-icon":"tabler-camera","show-size":"",chip:"",modelValue:i(d),"onUpdate:modelValue":c[2]||(c[2]=n=>U(d)?d.value=n:null),accept:"image/*"},null,8,["modelValue"])]),_:1}),i(d)||i(r).banner_url?(Q(),H(I,{key:0,cols:"12",class:"d-flex justify-center"},{default:u(()=>[B("div",it,[B("div",ut,[B("img",{src:i(d)?i(f):i(r).banner_url,alt:"Banner",style:{width:"100%",height:"100%","object-fit":"cover","object-position":"center"}},null,8,dt),B("div",ct,[i(d)||i(r).banner_url?(Q(),H(W,{key:0,color:"error",onClick:J,density:"compact",style:{width:"40px",height:"40px","min-width":"0","border-radius":"8px"}},{default:u(()=>[e(oe,{icon:"tabler-trash"})]),_:1})):ee("",!0)])]),c[8]||(c[8]=B("div",{class:"text-subtitle-1 text-medium-emphasis"}," Banner Preview ",-1))])]),_:1})):ee("",!0),e(I,{cols:"12"},{default:u(()=>[e(X,{modelValue:i(r).equipment_id,"onUpdate:modelValue":c[3]||(c[3]=n=>i(r).equipment_id=n),label:"Select Equipment",placeholder:"Select Equipment",items:i(D),clearable:!0},null,8,["modelValue","items"])]),_:1}),e(I,{cols:"12"},{default:u(()=>[e($,{modelValue:i(r).duration_min,"onUpdate:modelValue":c[4]||(c[4]=n=>i(r).duration_min=n),label:"Duration (minutes)",placeholder:"60",type:"number"},null,8,["modelValue"])]),_:1}),e(I,{cols:"12"},{default:u(()=>[e(me,{text:"Description",class:"mb-1 text-body-2"}),e(a,{modelValue:i(r).description,"onUpdate:modelValue":c[5]||(c[5]=n=>i(r).description=n),class:"border rounded"},null,8,["modelValue"])]),_:1}),e(I,{cols:"12"},{default:u(()=>[e(me,{text:"Requirement",class:"mb-1 text-body-2"}),e(a,{modelValue:i(r).requirements,"onUpdate:modelValue":c[6]||(c[6]=n=>i(r).requirements=n),class:"border rounded"},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",class:"text-center"},{default:u(()=>[e(W,{type:"submit",class:"me-3"},{default:u(()=>c[9]||(c[9]=[O(" submit ")])),_:1}),e(W,{variant:"tonal",color:"secondary",onClick:g},{default:u(()=>c[10]||(c[10]=[O(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),mt={class:"text-h4 text-center mb-2"},vt=re({__name:"AddEditLevelDialog",props:{resource:{default:()=>({id:"",name:"",store_id:"",parent_id:"",code:"",order:"",status:"active"})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","submit"],setup(t,{emit:h}){const{showSnackbar:v}=Ve(),V=t,p=h,d=b(structuredClone(K(V.resource))??{id:"",name:"",store_id:"",parent_id:"",code:"",order:"",status:"active"});R(()=>V.resource,s=>{d.value=structuredClone(K(s)??{id:"",name:"",store_id:"",parent_id:"",code:"",order:"",status:"active"})},{deep:!0});const f=b({name:void 0,email:void 0,gender:void 0,phone:void 0}),C=b(!1),k=()=>{p("update:isDialogVisible",!1),d.value=structuredClone(K(V.resource))},_=async()=>{try{if(d.value.id){const s=await S();s!=null&&s.id&&(p("update:isDialogVisible",!1),p("submit",s))}else{const s=await r();s!=null&&s.id&&(p("update:isDialogVisible",!1),p("submit",s))}}catch(s){console.error("Failed to submit form:",s)}},{storeLevel:D,updateLevel:x}=xe(),r=async()=>{var s;try{f.value={},C.value=!0,delete d.value.id;const{data:g,error:q,response:w}=await D(d.value);if(q.value){f.value=((s=q.value.data)==null?void 0:s.errors)??{},v(q.value.message,"error"),C.value=!1;return}return C.value=!1,g.value}catch(g){console.error("Failed to delete class:",g)}finally{C.value=!1}},S=async()=>{var s;try{f.value={},C.value=!0;const{data:g,error:q,response:w}=await x(d.value.id,d.value);if(q.value){f.value=((s=q.value.data)==null?void 0:s.errors)??{},v(q.value.message,"error"),C.value=!1;return}return C.value=!1,g.value}catch(g){console.error("Failed to delete class:",g)}finally{C.value=!1}};return(s,g)=>{const q=fe,w=se;return Q(),H(De,{width:s.$vuetify.display.smAndDown?"auto":900,"model-value":V.isDialogVisible,"onUpdate:modelValue":g[2]||(g[2]=F=>s.$emit("update:isDialogVisible",F))},{default:u(()=>[e(q,{onClick:g[0]||(g[0]=F=>s.$emit("update:isDialogVisible",!1))}),e(ne,{class:"pa-2 pa-sm-10"},{default:u(()=>[e(Ce,null,{default:u(()=>[B("h4",mt,ae(V.resource.id?"Edit":"Add New")+" Level ",1),e(ke,{onSubmit:be(_,["prevent"])},{default:u(()=>[e(we,null,{default:u(()=>[e(I,{cols:"12"},{default:u(()=>[e(w,{modelValue:i(d).name,"onUpdate:modelValue":g[1]||(g[1]=F=>i(d).name=F),label:"Name",placeholder:"Name","error-messages":i(f).name},null,8,["modelValue","error-messages"])]),_:1}),e(I,{cols:"12",class:"text-center"},{default:u(()=>[e(W,{type:"submit",class:"me-3",loading:i(C)},{default:u(()=>g[3]||(g[3]=[O(" Submit ")])),_:1},8,["loading"]),e(W,{variant:"tonal",color:"secondary",onClick:k},{default:u(()=>g[4]||(g[4]=[O(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),pt={class:"d-flex flex-wrap gap-4 my-4 mx-6"},ft={class:"d-flex gap-4 flex-wrap align-center"},yt={class:"d-flex flex-wrap gap-4 ma-6"},Et=re({__name:"Level",setup(t){const h=_e(),v=Me(),V=Ke(),p=b(v.query.status||void 0),d=b(v.query.q||""),f=b(d.value),C=b([]),k=b(Number(v.query.itemsPerPage)||15),_=b(Number(v.query.page)||1),D=b(v.query.sortBy||void 0),x=b(v.query.orderBy||void 0),r=b({currentPage:_.value,lastPage:1,total:0,perPage:k.value}),S=()=>{console.log("updateQueryParams");const m={...v.query,q:d.value||void 0,status:p.value||void 0,page:_.value!==1?String(_.value):void 0,itemsPerPage:k.value!==15?String(k.value):void 0,sortBy:D.value||void 0,orderBy:x.value||void 0};Object.keys(m).forEach(l=>{m[l]===void 0&&delete m[l]}),V.replace({query:m})};R([d,p,k,_,D,x],()=>{S()}),R(()=>v.query,()=>{(v.query.q!==d.value||v.query.status!==p.value||Number(v.query.page||1)!==_.value||Number(v.query.itemsPerPage||15)!==k.value||v.query.sortBy!==D.value||v.query.orderBy!==x.value)&&(d.value=v.query.q||"",p.value=v.query.status||void 0,_.value=Number(v.query.page)||1,k.value=Number(v.query.itemsPerPage)||15,D.value=v.query.sortBy||void 0,x.value=v.query.orderBy||void 0),o()},{deep:!0});let s=null;R(f,m=>{s&&clearTimeout(s),s=setTimeout(()=>{d.value=m,_.value!==1&&(_.value=1)},500)}),Oe(()=>{s&&clearTimeout(s)});const{status:g}=ge(h),q=m=>{var l,A;_.value=m.page,k.value=m.itemsPerPage,m.sortBy&&m.sortBy.length>0?(D.value=(l=m.sortBy[0])==null?void 0:l.key,x.value=(A=m.sortBy[0])==null?void 0:A.order):(D.value=void 0,x.value=void 0)},w=b(null),{fetchLevels:F,deleteLevel:G,reactivateLevel:T}=xe(),J=b([]),o=async()=>{const m={q:d.value,status:p.value,page:_.value,per_page:k.value,sort_by:D.value,order_by:x.value},{data:l,response:A,error:E}=await F({query:m});return J.value=l.data,w.value=l,{data:l,response:A,error:E}};R(w,m=>{m&&(r.value={currentPage:m.current_page,lastPage:m.last_page,total:m.total,perPage:m.per_page},_.value=m.current_page,k.value=m.per_page)},{deep:!0});const c=[{title:"Name",key:"name"},{title:"Status",key:"status",sortable:!1,align:"end",width:100},{title:"Actions",key:"actions",sortable:!1,align:"end",width:"100px"}],P=m=>{if(m==="active")return{text:"Active",color:"success"};if(m==="inactive")return{text:"Inactive",color:"error"}},$=async m=>{try{await G(m),o()}catch(l){console.error("Failed to delete class:",l)}},X=async m=>{try{await T(m),o()}catch(l){console.error("Failed to delete class:",l)}};Qe(async()=>{await o()});const a=b(!1),n=b(!1),L=b(null),te=m=>{L.value=m,n.value=!0};return(m,l)=>{const A=vt,E=se,j=Je("IconBtn"),z=et;return Q(),Ge("div",null,[e(ne,null,{default:u(()=>[B("div",pt,[l[11]||(l[11]=B("div",{class:"font-weight-medium text-lg align-self-center"},"Level",-1)),e(tt),B("div",ft,[e(W,{color:"primary","prepend-icon":"tabler-plus",onClick:l[0]||(l[0]=()=>{a.value=!0})},{default:u(()=>l[10]||(l[10]=[O(" Add Level ")])),_:1}),e(A,{"is-dialog-visible":i(a),"onUpdate:isDialogVisible":l[1]||(l[1]=y=>U(a)?a.value=y:null),onSubmit:l[2]||(l[2]=y=>o())},null,8,["is-dialog-visible"]),e(A,{"is-dialog-visible":i(n),"onUpdate:isDialogVisible":l[3]||(l[3]=y=>U(n)?n.value=y:null),resource:i(L),onSubmit:l[4]||(l[4]=y=>o())},null,8,["is-dialog-visible","resource"])])]),e(ve),B("div",yt,[e(E,{modelValue:i(f),"onUpdate:modelValue":l[5]||(l[5]=y=>U(f)?f.value=y:null),placeholder:"Search",clearable:""},null,8,["modelValue"])]),e(ve,{class:"mt-4"}),e(lt,{"items-per-page":i(k),"onUpdate:itemsPerPage":l[7]||(l[7]=y=>U(k)?k.value=y:null),"model-value":i(C),"onUpdate:modelValue":l[8]||(l[8]=y=>U(C)?C.value=y:null),page:i(_),"onUpdate:page":l[9]||(l[9]=y=>U(_)?_.value=y:null),headers:c,"show-select":"",items:i(J),"items-length":i(r).total,class:"text-no-wrap","onUpdate:options":q},{"item.status":u(({item:y})=>[e(qe,Z(P(y.status??""),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":u(({item:y})=>[e(j,{onClick:Y=>te(y)},{default:u(()=>[e(oe,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(j,null,{default:u(()=>[e(oe,{icon:"tabler-dots-vertical"}),e(at,{activator:"parent"},{default:u(()=>[e(ot,null,{default:u(()=>[y.status==="active"?(Q(),H(pe,{key:0,value:"delete","prepend-icon":"tabler-x",onClick:Y=>$(y.id),"base-color":"error"},{default:u(()=>l[12]||(l[12]=[O(" Deactive ")])),_:2},1032,["onClick"])):ee("",!0),y.status==="inactive"?(Q(),H(pe,{key:1,value:"reactivate","prepend-icon":"tabler-check",onClick:Y=>X(y.id),"base-color":"success"},{default:u(()=>l[13]||(l[13]=[O(" Activate ")])),_:2},1032,["onClick"])):ee("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:u(()=>[e(z,{page:i(_),"onUpdate:page":l[6]||(l[6]=y=>U(_)?_.value=y:null),"items-per-page":i(r).perPage,"total-items":i(r).total},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1})])}}});export{Tt as _,Et as a};
